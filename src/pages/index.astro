---
import { getCollection } from "astro:content";
import PageLayout from "@/layouts/BaseLayout";
import PostPreview from "@/components/PostPreview";
import { sortMDByDate } from "@/utils";
const MAX_POSTS = 10;
const allPosts = await getCollection("post");
const allPostsByDate = sortMDByDate(allPosts).slice(0, MAX_POSTS);
---

<PageLayout meta={{ title: "Home" }}>
  <section>
    <h1>Hello World!</h1>
    <p>
      Hi, Iâ€™m a theme for Astro, an example of how you can use this starter to
      create a personal blog. If you want to know more about how you can
      customise me, add more posts, and make it your own, click on one the
      github icon link below which will take you to my repo.
    </p>
  </section>
  <section aria-label="Blog post list">
    <h2>Posts</h2>
    <ul>
      {
        allPostsByDate.map((p) => (
          <li>
            <PostPreview post={p} />
          </li>
        ))
      }
    </ul>
  </section>
</PageLayout>
